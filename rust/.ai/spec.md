# 지침 및 개요
- 코드 작성: 읽기 쉽고 유지보수하기 쉽게 간결하게 작성. 로직 코드는 최대한 유닛 테스트를 만들 수 있게 작성
- 코드 수정: 꼭 필요한 부분만 수정. 기존 프로젝트 컨벤션과 스타일을 엄격히 준수
- 함수화 및 재활용: 코드가 함수화에 적합하면 함수로 감싸고, 중복된 코드가 없게 기존 함수를 최대한 재활용
- 커밋: 자동으로 커밋하지 말고, 요청 시에만 이전 작업 내역 바탕으로 커밋 메시지 작성 후 수행
- 문서 수정: 문서도 꼭 필요한 부분만 최소한으로 수정하고, 수정후 수정된 내역을 보여줘.
- 스펙문서는 특별히 요청하지 않으면 지침 및 개요 항목은 수정하지 않는다.

## 작업 진행 가이드
- 버그 수정, 기능 추가 혹은 개선 요청 시에는 먼저 본 스펙 문서를 갱신
  - 수정된 부분을 공유하면 함께 리뷰하며 보완
- "테스트"라고 명령하면
  1) 스펙 문서에 추가 및 변경한 내용 기준으로 테스트 케이스 문서의 항목 수정
     - 버그일 경우 스펙 문서가 변동되지 않을 수 있으나 테스트 케이스는 수정
  2) 수정된 테스트 케이스를 함께 리뷰 및 지시대로 수정
- "구현"이라고 말하면
  1) 스펙에 추가 및 변경된 부분 구현, 테스트 케이스의 테스트 코드까지 구현
  2) 유닛 테스트 수행
- "커밋"이라고 말하면 변경 사항 정리 후 커밋

## spec문서
- 본문서 제품의 스펙을 정의한다.
  - 프론트엔드는 화면 중심으로 서술, 백엔드는 데이터 구조 및 소스 중심으로 서술
  - 새로운 기능이 추가되거나 UI가 수정되면 본 문서를 갱신

## 유닛 테스트
- 코드를 수정하면 언제나 유닛 테스트 수행
- 새로운 기능이 추가되면 `.ai/test.md` 문서에 새 항목을 추가하고 갱신
- `.ai/test.md` 문서에 소스 파일/클래스 중심으로 유닛 테스트 케이스를 나열하고, 유닛 테스트 구현 상태를 추가로 명시
  - 유닛 테스트가 구현되었다면 해당 유닛 테스트 위치 명시
  - 유닛 테스트가 아직 구현되지 않았다면 구현
  - 유닛 테스트를 구현할 수 없다면 이유 서술

## 프로그램의 목적
`sc`는 CLI 환경에서 효율적인 파일 시스템 탐색과 Git 관리를 지원하는 도구입니다.

# Sharpen Commander (sc) 기능 명세서

## 1. 메인 화면 (Main Screen)
기본적인 파일 시스템 탐색 및 명령어 실행 화면입니다.

- **다음 항목 선택** (`Down`, `j`): 아래로 한 칸 이동합니다.
- **이전 항목 선택** (`Up`, `k`): 위로 한 칸 이동합니다.
- **디렉토리 진입** (`Enter`, `Alt+L`): 선택한 디렉토리로 진입합니다.
- **상위 디렉토리 이동** (`Left`, `h`, `U`, `.`, `Alt+H`): 부모 디렉토리로 이동합니다.
- **에디터 열기** (`E`): 설정된 에디터(`edit_app`)로 파일을 엽니다.
- **커맨드라인 입력 모드 전환** (`/`): 명령어 입력 모드를 실행합니다.
- **즐겨찾기 목록** (`L`): 등록된 저장소/경로 목록(`RegList`) 화면으로 전환합니다.
- **Git 상태 확인** (`C`): 현재 디렉토리의 Git 상태(`GitStatus`) 화면으로 전환합니다.
- **이동(Goto) 화면** (`g`, `G`, `Right`, `l`): 빠른 경로 이동 화면으로 전환합니다.
- **현재 경로 등록** (`R`): 현재 선택된 디렉토리를 즐겨찾기에 추가합니다.
- **즐겨찾기 삭제** (`D`): 즐겨찾기 목록에서 삭제합니다 (확인 팝업 노출).
- **빠른 Pull** (`F`): 선택된 디렉토리에서 `git pull -r`을 실행합니다.
- **Tig 실행** (`T`): 현재 작업 디렉토리에서 `tig`를 실행합니다.
- **Lua 실행/Push** (`P`): `.lua` 파일일 경우 실행하고, 아닐 경우 `git push` 대화상자를 호출합니다.
- **프로그램 종료** (`q`): 프로그램을 종료하고 현재 경로를 `/tmp/cmdDevTool.path`에 저장합니다.

### 명령어 입력 모드 (`/`)
- `find` / `ff`: Find 화면으로 전환
- `grep` / `gg`: Grep 화면으로 전환
- `reg`: 현재 디렉토리 등록
- `st [target]`: Git 상태 요약 표시
- `update [target]`: Git Fetch & Pull 실행
- `fetch [target]`: Git Fetch 실행

---

## 2. 찾기 화면 (Find Screen)
파일 검색 결과를 확인하고 미리보기를 제공하는 화면입니다.

- **항목 선택** (`Down/J`, `Up/K`): 검색 결과 목록을 이동하며 우측에 파일 내용을 미리 보여줍니다.
- **경로 이동** (`Enter`): 선택된 파일이 위치한 디렉토리로 작업 경로를 변경합니다.
- **에디터 열기** (`E`): 선택된 파일을 에디터로 엽니다.
- **메인 복귀** (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 3. Grep 화면 (Grep Screen)
코드 검색(Grep) 결과를 확인하는 화면입니다.

- **항목 선택** (`Down/J`, `Up/K`): 검색 결과 목록을 이동합니다.
- **경로 이동** (`Enter`): 해당 검색 결과가 있는 파일의 디렉토리로 이동합니다.
- **메인 복귀** (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 4. Git 상태 화면 (GitStatus Screen)
현재 저장소의 변경 사항을 관리하는 화면입니다.

- **항목 선택** (`Down/J`, `Up/K`): 변경된 파일 목록을 이동하며 하단에 Diff를 표시합니다.
- **스테이징** (`A`): `git add`를 실행합니다.
- **언스테이징** (`R`): `git reset`을 실행합니다.
- **되돌리기/삭제** (`D`): 변경사항을 취소(checkout)하거나 추적되지 않는 파일을 삭제합니다.
- **커밋 화면 이동** (`C`): Git 커밋(`GitCommit`) 화면으로 전환합니다.
- **에디터 열기** (`E`): 선택된 파일을 에디터로 엽니다.
- **Tig 실행** (`T`): 현재 저장소에서 `tig`를 실행합니다.
- **메인 복귀** (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 5. Git 커밋 화면 (GitCommit Screen)
변경 사항을 커밋하는 화면입니다.

- **메시지 입력** (입력 모드): 하단 프롬프트에서 커밋 메시지를 입력합니다.
- **커밋 실행** (`Enter` - 입력 모드): 입력된 메시지로 `git commit`을 실행 후 메인으로 복귀합니다.
- **상태 화면 복귀** (`F4`, `Esc`): Git 상태 화면으로 돌아갑니다.
- **스테이징 추가** (`A` - 일반 모드): 파일 목록에서 선택된 파일을 `git add` 합니다.
- **스테이징 취소** (`R` - 일반 모드): 파일 목록에서 선택된 파일을 `git reset` 합니다.
- **입력 모드 진입** (`I`): 커밋 메시지 입력 모드를 시작합니다.

---

## 6. 즐겨찾기 목록 화면 (RegList Screen)
등록된 모든 경로와 저장소를 관리하고 일괄 작업을 수행하는 화면입니다.

- **항목 선택** (`Down`, `Up`): 목록을 이동하며 우측에 Git 상태(`status`) 또는 로그를 표시합니다.
- **일괄 Pull** (`P`): 등록된 모든 저장소에 대해 순차적으로 `git pull`을 실행합니다.
- **단일 Pull** (`F`): 현재 선택된 저장소만 `git pull -r`을 실행합니다.
- **상태 갱신** (`S`): 선택된 저장소의 상세 Git 상태를 표시합니다.
- **Tig 실행** (`T`): 선택된 저장소 경로에서 `tig`를 실행합니다.
- **삭제** (`D`, `Delete`): 목록에서 해당 경로를 제거합니다 (확인 팝업 노출).
- **경로 이동** (`Enter`): 선택된 디렉토리로 이동하여 메인 화면으로 전환합니다.
- **필터 입력** (문자열): 목록을 검색하고 필터링합니다.
- **메인 복귀** (`Q`, `Left`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 7. 이동 화면 (Goto Screen)
즐겨찾기 및 하위 디렉토리로 빠르게 이동하기 위한 검색 화면입니다.

- **항목 선택** (`Down/J`, `Up/K`): 검색된 경로 목록을 이동합니다.
- **필터 입력** (문자열): 경로 명칭으로 검색합니다 (무순서 매칭 지원).
- **경로 이동** (`Enter`): 선택된 경로(저장소 또는 폴더)로 이동하여 메인 화면으로 전환합니다. 파일인 경우 에디터로 엽니다.
- **상위 이동** (`U`): 현재 작업 디렉토리의 부모로 이동 후 목록을 갱신합니다.
- **메인 복귀** (`Q`, `Left`, `Esc`): 메인 화면으로 돌아갑니다.