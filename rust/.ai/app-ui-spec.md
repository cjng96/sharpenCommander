

# Sharpen Commander (sc) 기능 명세서

## 커멘드 라인 아규먼트
- [x] --help: 커멘드 라인 사용법 출력
- [x] 그외 문자열: 입력된 문자열로 filter로 goto screen을 바로 띄운다

## 1. 메인 화면 (Main Screen)
기본적인 파일 시스템 탐색 및 명령어 실행 화면입니다.

- [x] 다음 항목 선택 (`Down`, `j`): 아래로 한 칸 이동합니다.
- [x] 이전 항목 선택 (`Up`, `k`): 위로 한 칸 이동합니다.
- [x] 디렉토리 진입 (`Enter`, `Alt+L`): 선택한 디렉토리로 진입합니다.
- [x] 상위 디렉토리 이동 (`Left`, `h`, `U`, `.`, `Alt+H`): 부모 디렉토리로 이동합니다.
- [x] 에디터 열기 (`E`): 설정된 에디터(`edit_app`)로 파일을 엽니다.
- [x] 커맨드라인 입력 모드 전환 (`/`): 명령어 입력 모드를 실행합니다.
- [x] 즐겨찾기 목록 (`L`): 등록된 저장소/경로 목록(`RegList`) 화면으로 전환합니다.
- [x] Git 상태 확인 (`C`): 현재 디렉토리의 Git 상태(`GitStatus`) 화면으로 전환합니다.
- [x] 이동(Goto) 화면 (`g`, `G`, `Right`, `l`): 빠른 경로 이동 화면으로 전환합니다.
- [x] 현재 경로 등록 (`R`): 현재 선택된 디렉토리를 즐겨찾기에 추가합니다.
- [x] 즐겨찾기 삭제 (`D`): 즐겨찾기 목록에서 삭제합니다 (확인 팝업 노출).
- [x] 빠른 Pull (`F`): 선택된 디렉토리에서 `git pull -r`을 실행합니다.
- [x] Tig 실행 (`T`): 현재 작업 디렉토리에서 `tig`를 실행합니다.
- [x] Lua 실행/Push (`P`): `.lua` 파일일 경우 실행하고, 아닐 경우 `git push` 대화상자를 호출합니다.
- [x] 프로그램 종료 (`q`): 프로그램을 종료하고 현재 경로를 `/tmp/cmdDevTool.path`에 저장합니다.

### 명령어 입력 모드 (`/`)
- [x] `find` / `ff`: Find 화면으로 전환
- [x] `grep` / `gg`: Grep 화면으로 전환
- [x] `reg`: 현재 디렉토리 등록
- [x] `st [target]`: Git 상태 요약 표시
- [x] `update [target]`: Git Fetch & Pull 실행
- [x] `fetch [target]`: Git Fetch 실행

---

## 2. 찾기 화면 (Find Screen)
파일 검색 결과를 확인하고 미리보기를 제공하는 화면입니다.

- [x] 항목 선택 (`Down/J`, `Up/K`): 검색 결과 목록을 이동하며 우측에 파일 내용을 미리 보여줍니다.
- [x] 경로 이동 (`Enter`): 선택된 파일이 위치한 디렉토리로 작업 경로를 변경합니다.
- [x] 에디터 열기 (`E`): 선택된 파일을 에디터로 엽니다.
- [x] 메인 복귀 (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 3. Grep 화면 (Grep Screen)
코드 검색(Grep) 결과를 확인하는 화면입니다.

- [x] 항목 선택 (`Down/J`, `Up/K`): 검색 결과 목록을 이동합니다.
- [x] 경로 이동 (`Enter`): 해당 검색 결과가 있는 파일의 디렉토리로 이동합니다.
- [x] 메인 복귀 (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 4. Git 상태 화면 (GitStatus Screen)
현재 저장소의 변경 사항을 관리하는 화면입니다.

- [x] 항목 선택 (`Down/J`, `Up/K`): 변경된 파일 목록을 이동하며 하단에 Diff를 표시합니다.
- [x] 스테이징 (`A`): `git add`를 실행합니다.
- [x] 언스테이징 (`R`): `git reset`을 실행합니다.
- [x] 되돌리기/삭제 (`D`): 변경사항을 취소(checkout)하거나 추적되지 않는 파일을 삭제합니다.
- [x] 이그노어 추가 (`I`): 현재 선택된 파일이 Untracked 상태일 경우 `.gitignore`에 추가합니다. Untracked 상태가 아니면 경고를 표시합니다.
- [x] 커밋 화면 이동 (`C`): Git 커밋(`GitCommit`) 화면으로 전환합니다.
- [x] 에디터 열기 (`E`): 선택된 파일을 에디터로 엽니다.
- [x] Tig 실행 (`T`): 현재 저장소에서 `tig`를 실행합니다.
- [x] 메인 복귀 (`Q`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 5. Git 커밋 화면 (GitCommit Screen)
변경 사항을 커밋하는 화면입니다.

- [x] 메시지 입력 (입력 모드): 하단 프롬프트에서 커밋 메시지를 입력합니다.
- [x] 커밋 실행 (`Enter` - 입력 모드): 입력된 메시지로 `git commit`을 실행 후 메인으로 복귀합니다.
- [x] 상태 화면 복귀 (`F4`, `Esc`): Git 상태 화면으로 돌아갑니다.
- [x] 스테이징 추가 (`A` - 일반 모드): 파일 목록에서 선택된 파일을 `git add` 합니다.
- [x] 스테이징 취소 (`R` - 일반 모드): 파일 목록에서 선택된 파일을 `git reset` 합니다.
- [x] 입력 모드 진입 (`I`): 커밋 메시지 입력 모드를 시작합니다.

---

## 6. 즐겨찾기 목록 화면 (RegList Screen)
등록된 모든 경로와 저장소를 관리하고 일괄 작업을 수행하는 화면입니다.
화면이 시작되면, 등록된 모든 경로의 Git 상태값을 가져와서 상태를 표시해줍니다.

- [x] 항목 표시:
    - [x] 왼쪽: 저장소 이름 및 상위 경로와 상태값 (이름이 경로의 끝과 일치하면 경로에서 이름 제외)
      - 형식: '이름 상태값 (상위경로) '
      - 강조: 
        - 커밋하지 않은 변경 사항(*)이 있는 경우 항목 전체의 색상을 녹색(Green)으로 표시
        - 리모트로 보낼 커밋(+)이 있거나, 받을 커밋이 있는 경우(-) 항목 전체의 색상을 노란색(Yellow)으로 표시 (커밋하지 않은 변경 사항이 없는 경우)
      - 상태값
        - *: 커밋하지 않은 변경 사항 있음
        - +N: 리모트 브랜치보다 N개 커밋 앞섬 (보낼 것)
        - -M: 리모트 브랜치보다 M개 커밋 뒤처짐 (받을 것)
      - 경로가 변경된면 오른쪽 영역을 갱신한다.
    - [x] 오른쪽: Git 상태 정보 (저장소인 경우)
      - 항목(경로)이 변경되었을 때 오른쪽 상세 정보 패널영역 전체를 비워(Clear) 깨끗하게 하고, 선택된 저장소의 Git 상태 정보를 새롭게 표시한다.
- [x] 항목 선택 (`Down`, `Up`): 목록을 이동하며 우측에 Git 상태(`status`) 또는 로그를 표시합니다.
- [x] 일괄 Pull (P): 등록된 모든 저장소에 대해 순차적으로 git pull을 실행합니다. 작업 완료 후 각 저장소의 상태값을 자동으로 갱신합니다.
- [x] 단일 Pull (F): 현재 선택된 저장소만 git pull -r을 실행합니다. 작업 완료 후 해당 저장소의 상태값을 자동으로 갱신합니다.
- [x] 상태 갱신 (S): 선택된 저장소의 상세 Git 상태를 표시하고, 리스트의 상태값도 함께 갱신합니다.
- [x] Tig 실행 (`T`): 선택된 저장소 경로에서 `tig`를 실행합니다.
- [x] 삭제 (`D`, `Delete`): 목록에서 해당 경로를 제거합니다 (확인 팝업 노출).
- [x] 경로 이동 (`Enter`): 선택된 디렉토리로 이동하여 메인 화면으로 전환합니다.
- [x] 필터 입력 (문자열): 목록을 검색하고 필터링합니다.
- [x] 메인 복귀 (`Q`, `Left`, `Esc`): 메인 화면으로 돌아갑니다.

---

## 7. 이동 화면 (Goto Screen)
즐겨찾기 및 하위 디렉토리로 빠르게 이동하기 위한 검색 화면입니다.

- [x] 항목 선택 (`Down/J`, `Up/K`): 검색된 경로 목록을 이동합니다.
- [x] 필터 입력 (문자열): 경로 명칭으로 검색합니다 (무순서 매칭 지원).
- [x] 경로 이동 (`Enter`): 선택된 경로(저장소 또는 폴더)로 이동하여 메인 화면으로 전환합니다. 파일인 경우 에디터로 엽니다.
- [x] 상위 이동 (`U`): 현재 작업 디렉토리의 부모로 이동 후 목록을 갱신합니다.
- [x] 메인 복귀 (`Q`, `Left`, `Esc`): 메인 화면으로 돌아갑니다.